<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Manager - GenZ IIITian</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Space Grotesk', sans-serif; background: #000; color: #e5e5e5; height: 100vh; overflow: hidden; }
        .glass { background: rgba(20, 20, 20, 0.4); backdrop-filter: blur(16px); border: 1px solid rgba(255,255,255,0.05); }
        .input-base { background: #0a0a0a; border: 1px solid #262626; color: white; padding: 0.5rem; border-radius: 0.5rem; width: 100%; font-size: 0.875rem; transition: all 0.2s; }
        .input-base:focus { outline: none; border-color: #6366f1; background: #0f0f0f; }
        .label { display: block; font-size: 0.7rem; color: #737373; margin-bottom: 0.25rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.05em; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #555; }

        .preview-content h1 { font-size: 2rem; font-weight: 700; margin-bottom: 1rem; color: white; }
        .preview-content h2 { font-size: 1.5rem; font-weight: 600; margin-top: 2rem; margin-bottom: 1rem; color: #e5e5e5; border-bottom: 1px solid #333; padding-bottom: 0.5rem; }
        .preview-content p { color: #a3a3a3; line-height: 1.6; margin-bottom: 1rem; }
        .preview-content ul { list-style-type: disc; padding-left: 1.5rem; margin-bottom: 1rem; color: #d4d4d4; }
        
        /* Accents */
        .accent-border:hover { border-color: #6366f1; }
        .active-course { background: rgba(99, 102, 241, 0.1); border-color: rgba(99, 102, 241, 0.4); }
        .nav-item.active { background: #fff; color: #000; }
        .nav-item:not(.active):hover { background: rgba(255,255,255,0.1); }
    </style>
</head>
<body>
    <div id="app" class="flex h-full text-sm">
        <!-- Sidebar Navigation -->
        <div :class="['bg-[#050505] flex flex-col h-full border-r border-[#1a1a1a] flex-shrink-0 transition-all duration-300 ease-in-out', sidebarOpen ? 'w-72 translate-x-0' : 'w-0 -translate-x-full opacity-0 border-none overflow-hidden']">
            <!-- Header -->
            <div class="p-5 border-b border-[#1a1a1a]">
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center font-bold text-white shadow-lg shadow-indigo-900/50">G</div>
                    <div>
                        <h1 class="font-bold text-lg leading-tight text-white">GenZ CM</h1>
                        <p class="text-[10px] text-gray-500 font-mono">v2.1 • Data Studio</p>
                    </div>
                </div>

                <!-- Tabs -->
                <div class="flex bg-[#111] p-1 rounded-lg mb-4 overflow-x-auto no-scrollbar gap-1">
                     <button v-for="level in ['foundation', 'diploma', 'degree', 'pg_diploma', 'mtech']" 
                        @click="currentLevel = level"
                        :class="['flex-1 whitespace-nowrap px-3 py-1.5 text-xs font-medium rounded-md capitalize transition-all duration-300', 
                                currentLevel === level ? 'bg-[#222] text-white shadow-sm' : 'text-gray-500 hover:text-gray-300']">
                        {{ level.replace('_', ' ') }}
                    </button>
                </div>
                
                <!-- Search -->
                <div class="relative group">
                    <i class="fa-solid fa-search absolute left-3 top-2.5 text-gray-600 group-focus-within:text-indigo-500 transition-colors"></i>
                    <input v-model="searchQuery" class="input-base pl-9 bg-[#0a0a0a] border-[#222] focus:border-indigo-500/50 placeholder-gray-700" placeholder="Filter courses...">
                </div>
            </div>

            <!-- Course List -->
            <div class="flex-1 overflow-y-auto px-3 py-2 space-y-1">
                <template v-if="filteredCourses.length > 0">
                    <div v-for="c in filteredCourses" :key="c.code" 
                         @click="loadCourse(c)"
                         :class="['p-4 rounded-xl cursor-pointer transition-all duration-300 border group relative overflow-hidden', 
                                  selectedCourse && selectedCourse.code === c.code ? 'active-course border-indigo-500/30' : 'bg-[#0f0f0f] border-[#1a1a1a] hover:border-[#333] hover:bg-[#141414]']">
                        
                        <div class="flex justify-between items-start relative z-10">
                            <span :class="['text-[10px] font-mono tracking-wider px-2 py-0.5 rounded transition-colors', selectedCourse && selectedCourse.code === c.code ? 'bg-indigo-500/20 text-indigo-300' : 'bg-white/5 text-gray-400 group-hover:text-indigo-400']">{{ c.code }}</span>
                            <span class="text-[10px] text-gray-600 font-medium group-hover:text-gray-400">{{ c.credits }} Cr</span>
                        </div>
                        <div class="font-medium text-gray-300 mt-3 text-sm truncate group-hover:text-white transition-colors relative z-10">{{ c.name }}</div>
                        
                        <!-- Hover Glow -->
                        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent translate-x-[-150%] group-hover:translate-x-[150%] transition-transform duration-700 pointer-events-none"></div>
                    </div>
                </template>
                <div v-else class="text-center py-10 text-gray-600">
                    <i class="fa-regular fa-folder-open text-2xl mb-2 opacity-50"></i>
                    <p class="text-xs">No courses found</p>
                </div>
            </div>
            
            <!-- Footer Actions -->
            <div class="p-4 border-t border-[#1a1a1a] bg-[#080808]">
                 <button @click="saveFile" :disabled="!selectedCourse" class="w-full bg-indigo-600 hover:bg-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed text-white py-2.5 rounded-lg text-xs font-bold transition flex items-center justify-center gap-2 shadow-lg shadow-indigo-900/20">
                    <i class="fa-solid fa-cloud-arrow-up"></i> Save Course Data
                </button>
            </div>
        </div>

        <!-- Main Workspace -->
        <div class="flex-1 flex flex-col bg-[#000] relative overflow-hidden">
            <!-- Background Decoration -->
            <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-indigo-900/10 rounded-full blur-[100px] pointer-events-none"></div>

            <div v-if="selectedCourse" class="h-full flex flex-col relative z-10">
                <!-- Toolbar -->
                <div class="h-16 border-b border-[#1a1a1a] flex justify-between items-center px-6 bg-[#000]/80 backdrop-blur-sm sticky top-0 z-20">
                    <div class="flex items-center gap-4">
                        <button @click="toggleSidebar" class="w-8 h-8 rounded-md bg-[#111] hover:bg-[#222] flex items-center justify-center text-gray-400 hover:text-white transition border border-[#222]">
                            <i :class="['fa-solid transition-transform', sidebarOpen ? 'fa-angles-left' : 'fa-angles-right']"></i>
                        </button>
                        <div>
                            <h2 class="text-xl font-bold text-white tracking-tight flex items-center gap-3">
                                {{ selectedCourse.name }}
                                <span class="text-xs font-normal px-2 py-0.5 rounded-full bg-white/10 text-gray-300 font-mono">{{ selectedCourse.code }}</span>
                            </h2>
                        </div>
                    </div>
                    
                    <div class="flex bg-[#111] rounded-lg p-1 border border-[#222]">
                        <button @click="viewMode = 'preview'" :class="['px-6 py-1.5 rounded-md text-xs font-medium transition-all', viewMode === 'preview' ? 'bg-[#333] text-white shadow-sm' : 'text-gray-500 hover:text-gray-300']">
                            <i class="fa-regular fa-eye mr-2"></i> Preview
                        </button>
                        <button @click="viewMode = 'edit'" :class="['px-6 py-1.5 rounded-md text-xs font-medium transition-all', viewMode === 'edit' ? 'bg-[#333] text-white shadow-sm' : 'text-gray-500 hover:text-gray-300']">
                            <i class="fa-solid fa-pen-to-square mr-2"></i> Editor
                        </button>
                    </div>
                </div>

                <!-- Scrollable Content Area -->
                <div class="flex-1 overflow-y-auto custom-scroll">
                    
                    <!-- PREVIEW MODE -->
                    <div v-if="viewMode === 'preview'" class="max-w-4xl mx-auto p-10 preview-content">
                        <!-- Hero Section -->
                        <div class="mb-12">
                             <span class="text-indigo-400 font-bold tracking-wider text-xs uppercase mb-2 block">{{ selectedCourse.level }} • {{ selectedCourse.credits }} Credits</span>
                             <h1 class="text-4xl md:text-5xl mb-6 bg-clip-text text-transparent bg-gradient-to-b from-white to-gray-500">{{ selectedCourse.name }}</h1>
                             <p class="text-lg text-gray-400 max-w-2xl">{{ selectedCourse.description }}</p>
                             
                             <div class="flex gap-4 mt-6">
                                 <div class="flex flex-col">
                                     <span class="label">Fee</span>
                                     <span class="text-white font-mono">₹{{ selectedCourse.fee }}</span>
                                 </div>
                                 <div class="w-px bg-white/10"></div>
                                 <div class="flex flex-col">
                                     <span class="label">Prerequisites</span>
                                     <span class="text-white">{{ selectedCourse.pre.join(', ') || 'None' }}</span>
                                 </div>
                                  <div class="w-px bg-white/10"></div>
                                 <div class="flex flex-col">
                                     <span class="label">Exam Structure</span>
                                     <div class="flex gap-2 text-xs text-gray-400">
                                         <span v-if="selectedCourse.exams.q1" class="bg-blue-900/30 text-blue-300 px-2 rounded">Quiz 1</span>
                                         <span v-if="selectedCourse.exams.q2" class="bg-blue-900/30 text-blue-300 px-2 rounded">Quiz 2</span>
                                         <span v-if="selectedCourse.exams.et" class="bg-purple-900/30 text-purple-300 px-2 rounded">End Term</span>
                                     </div>
                                 </div>
                             </div>
                        </div>

                        <!-- Syllabus Content -->
                        <div v-if="selectedCourse.weeks && selectedCourse.weeks.length">
                            <h3 class="text-xl font-bold text-white mb-6 flex items-center gap-2"><i class="fa-solid fa-list-check text-indigo-500"></i> Course Content</h3>
                            <div class="space-y-4">
                                <div v-for="week in selectedCourse.weeks" :key="week.weekNum" class="border border-[#222] bg-[#0a0a0a] rounded-xl overflow-hidden">
                                     <div class="p-4 flex justify-between items-center cursor-pointer hover:bg-[#111] transition" @click="togglePreviewWeek(week.weekNum)">
                                         <div class="flex items-center gap-4">
                                             <div class="w-10 h-10 rounded-full bg-[#151515] flex items-center justify-center text-gray-500 font-mono text-xs font-bold border border-[#222]">W{{ week.weekNum }}</div>
                                             <h4 class="font-medium text-gray-200">{{ week.title }}</h4>
                                         </div>
                                         <i :class="['fa-solid text-gray-600 transition', previewOpenWeeks.includes(week.weekNum) ? 'fa-minus' : 'fa-plus']"></i>
                                     </div>
                                     <div v-if="previewOpenWeeks.includes(week.weekNum)" class="p-4 pt-0 border-t border-[#222] bg-[#0c0c0c]">
                                         <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-6">
                                             <!-- Lectures -->
                                             <div>
                                                 <span class="label text-indigo-400 mb-2">Lectures</span>
                                                 <ul class="space-y-2 !list-none !p-0 !m-0">
                                                     <li v-for="lec in week.lectures" class="flex gap-3 text-sm text-gray-400 hover:text-white items-center group cursor-default">
                                                         <i class="fa-solid fa-play-circle text-gray-600 group-hover:text-indigo-500"></i>
                                                         <span class="flex-1">{{ lec.title }}</span>
                                                         <span class="text-xs font-mono text-gray-600">{{ lec.duration }}</span>
                                                     </li>
                                                 </ul>
                                             </div>
                                             <!-- Resources -->
                                             <div>
                                                 <span class="label text-emerald-400 mb-2">Resources</span>
                                                 <div class="flex flex-wrap gap-2">
                                                     <span v-for="note in week.notes" class="px-3 py-1.5 bg-[#151515] hover:bg-[#202020] border border-[#222] rounded text-xs text-gray-400 flex items-center gap-2 cursor-pointer transition">
                                                         <i class="fa-regular fa-file-pdf"></i> {{ note.title }}
                                                     </span>
                                                 </div>
                                             </div>
                                         </div>
                                     </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- EDITOR MODE -->
                    <div v-else class="max-w-5xl mx-auto p-10 pb-40">
                         <!-- Meta Cards -->
                         <div class="grid grid-cols-3 gap-6 mb-8">
                             <div class="col-span-2 bg-[#0a0a0a] border border-[#222] p-6 rounded-2xl">
                                 <h3 class="text-gray-400 font-bold mb-4 flex items-center gap-2 text-xs uppercase"><i class="fa-solid fa-info-circle"></i> Basic Details</h3>
                                 <div class="grid grid-cols-2 gap-4">
                                     <div><label class="label">Course Name</label><input v-model="selectedCourse.name" class="input-base"></div>
                                     <div><label class="label">Description</label><textarea v-model="selectedCourse.description" class="input-base h-20 resize-none"></textarea></div>
                                 </div>
                             </div>
                             <div class="space-y-6">
                                 <div class="bg-[#0a0a0a] border border-[#222] p-6 rounded-2xl">
                                     <h3 class="text-gray-400 font-bold mb-4 text-xs uppercase">Config</h3>
                                     <div class="space-y-3">
                                         <div><label class="label">Credits</label><input v-model.number="selectedCourse.credits" type="number" class="input-base"></div>
                                         <div><label class="label">Fee</label><input v-model.number="selectedCourse.fee" type="number" class="input-base"></div>
                                     </div>
                                 </div>
                             </div>
                         </div>

                         <!-- Content Editor -->
                         <div class="bg-[#0a0a0a] border border-[#222] p-6 rounded-2xl">
                             <div class="flex justify-between items-center mb-6">
                                 <h3 class="text-gray-400 font-bold text-xs uppercase"><i class="fa-solid fa-layer-group"></i> Weekly Curriculum</h3>
                                 <div class="flex bg-[#151515] rounded p-1">
                                     <button @click="expandAllWeeks" class="px-3 py-1 text-[10px] text-gray-500 hover:text-white">Expand All</button>
                                     <button @click="collapseAllWeeks" class="px-3 py-1 text-[10px] text-gray-500 hover:text-white">Collapse All</button>
                                 </div>
                             </div>
                             
                             <div class="space-y-4">
                                 <div v-for="(week, idx) in selectedCourse.weeks" :key="idx" class="border border-[#222] bg-[#050505] rounded-xl overflow-hidden">
                                     <!-- Week Header Editor -->
                                     <div class="p-4 flex items-center gap-4 bg-[#0d0d0d] border-b border-[#1a1a1a]">
                                         <div class="text-indigo-500 font-mono font-bold text-xs">W{{ week.weekNum }}</div>
                                         <input v-model="week.title" class="bg-transparent text-sm font-medium text-white focus:outline-none w-full placeholder-gray-700" placeholder="Enter week title...">
                                         <button @click="toggleEditWeek(idx)" class="text-gray-600 hover:text-white"><i :class="['fa-solid transition', editOpenWeeks.includes(idx) ? 'fa-chevron-up' : 'fa-chevron-down']"></i></button>
                                     </div>

                                     <!-- Week Content Editor -->
                                     <div v-if="editOpenWeeks.includes(idx)" class="p-4 space-y-6">
                                         <!-- Lectures -->
                                         <div>
                                            <div class="flex justify-between mb-2">
                                                <label class="label text-indigo-400">Video Lectures</label>
                                                <button @click="week.lectures.push({title:'New Lecture', duration:'10:00'})" class="text-[10px] text-indigo-400 hover:text-indigo-300">+ Add</button>
                                            </div>
                                            <div class="space-y-2">
                                                <div v-for="(lec, li) in week.lectures" class="flex gap-2 items-center bg-[#111] p-2 rounded border border-[#222]">
                                                    <i class="fa-solid fa-video text-gray-700 text-xs"></i>
                                                    <input v-model="lec.title" class="bg-transparent text-xs text-gray-300 w-full focus:outline-none" placeholder="Lecture Title">
                                                    <input v-model="lec.duration" class="bg-[#000] text-xs text-gray-500 w-16 text-center focus:outline-none rounded py-0.5" placeholder="00:00">
                                                    <button @click="week.lectures.splice(li, 1)" class="text-gray-700 hover:text-red-500 px-2"><i class="fa-solid fa-times"></i></button>
                                                </div>
                                            </div>
                                         </div>
                                         
                                         <!-- Resources -->
                                          <div>
                                            <div class="flex justify-between mb-2">
                                                <label class="label text-emerald-400">Study Material</label>
                                                <button @click="week.notes.push({title:'New Note'})" class="text-[10px] text-emerald-400 hover:text-emerald-300">+ Add</button>
                                            </div>
                                            <div class="space-y-2">
                                                <div v-for="(note, ni) in week.notes" class="flex gap-2 items-center bg-[#111] p-2 rounded border border-[#222]">
                                                    <i class="fa-solid fa-file text-gray-700 text-xs"></i>
                                                    <input v-model="note.title" class="bg-transparent text-xs text-gray-300 w-full focus:outline-none" placeholder="Resource Name">
                                                    <button @click="week.notes.splice(ni, 1)" class="text-gray-700 hover:text-red-500 px-2"><i class="fa-solid fa-times"></i></button>
                                                </div>
                                            </div>
                                         </div>
                                     </div>
                                 </div>
                             </div>
                         </div>
                    </div>

                </div>
            </div>

            <!-- Empty State -->
            <div v-else class="h-full flex flex-col items-center justify-center text-center p-12">
                 <div class="w-24 h-24 bg-indigo-500/10 rounded-full flex items-center justify-center mb-6 ring-4 ring-indigo-500/5">
                     <i class="fa-solid fa-layer-group text-4xl text-indigo-500"></i>
                 </div>
                 <h2 class="text-2xl font-bold text-white mb-2">Select a Course</h2>
                 <p class="text-gray-500 max-w-md">Browse the catalog on the left to view details, course structure, and edit content.</p>
            </div>
        </div>
    </div>
    <script src="./src/app.js" type="module"></script>
</body>
</html>
